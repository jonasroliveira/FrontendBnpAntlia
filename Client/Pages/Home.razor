@page "/"

<PageTitle>Home</PageTitle>

<h1>FrontendBnpAntlia</h1>

@if (spinner)
{
    <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
}
else
{
    <div class="card border-primary mb-3">
        <div class="card-body text-primary">
            <div class="row mb-2">
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Mês</label>
                        <input class="form-control" type="text" pattern="[0-9]{2}" placeholder="00" maxlength="2"
                            @bind="mes">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Ano</label>
                        <input class="form-control" type="text" pattern="[0-9]{2}" placeholder="2000" maxlength="4"
                            @bind="ano">
                    </div>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Produtos</label>
                        <select class="form-select" @onchange="OnSelecionouProduto">
                            <option value='0' selected>Selecionar</option>
                            @foreach (var val in produtos)
                            {
                                <option value="@val.CodigoProduto">@val.DescricaoProduto</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">COSIF</label>
                        <select class="form-select" @onchange="OnSelecionoucosif">
                            <option value='0' selected>Selecionar</option>
                            @foreach (var val in produtoCosifs)
                            {
                                <option value="@val.CodigoCosif">@val.Classificacao</option>
                            }
                        </select>
                    </div>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Valor</label>
                        <input type="int" class="form-control" @bind="valor">
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col">
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Descrição</label>
                        <input type="text" class="form-control" maxlength="30" @bind="descricao">
                    </div>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col" style="max-width: 100px;">
                    <button type="button" class="btn btn-primary" @onclick="LimparCampos">Limpar</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" @onclick="AdicionarMovimentoManual">Incluir</button>
                </div>                
            </div>
        </div>
    </div>

    <table class="table mt-4">
        <thead class="thead-light">
            <tr>
                <th scope="col">Mês</th>
                <th scope="col">Ano</th>
                <th scope="col">Código do Produto</th>
                <th scope="col">Descrição do Produto</th>
                <th scope="col">NR Lançamento</th>
                <th scope="col">Descrição</th>
                <th scope="col">Valor</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var val in MovimentoManualGet)
            {
                <tr>
                    <td>@val.Mes</td>
                    <td>@val.Ano</td>
                    <td>@val.CodigoProduto</td>
                    <td>@val.DescricaoProduto</td>
                    <td>@val.NumeroLancamento</td>
                    <td>@val.Descricao</td>
                    <td>@val.Valor</td>
                </tr>
            }
        </tbody>
    </table>
}